<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Sohba</title>
    <script type="importmap"></script>
    <link href="~/Icon.png" sizes="32x32" rel="icon" type="image/png" />

    @* <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" /> *@
    @* <link rel="stylesheet" href="~/css/tailwind.css" asp-append-version="true" /> *@
    @* <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" /> *@
    @* <link rel="stylesheet" href="~/Sohba.styles.css" asp-append-version="true" /> *@


    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

    <link rel="stylesheet" href="~/css/tailwind.css" />
    <link rel="stylesheet" href="~/css/legacy.css" />

    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-[#f0f2f5] text-slate-800 antialiased selection:bg-[#345e69] selection:text-white ">
    <partial name="Partials/_Header" />
   
    <div class="w-full px-0 sm:px-6 lg:px-8 max-w-[1920px] mx-auto">
        <div class="flex flex-row gap-6 items-start">

            @* Left Sidebar (Partial) - Fixed width *@
            <partial name="Partials/_Sidebar" />

            @* Main Content Wrapper (Dynamic Width) *@
            <main class="flex-1 min-w-0 py-6">
                @RenderBody()
            </main>

        </div>
    </div>



    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    
    @await RenderSectionAsync("Scripts", required: false)

    @* TODO: I Will Move It To App.JS File *@

    <script>
        window.SohbaApp = window.SohbaApp || {};

        Object.assign(window.SohbaApp, {

            toast: function (message, type = 'info') {

                const toast = document.createElement('div');
                toast.className = 'sohba-toast ' + type;
                toast.innerText = message;

                toast.style.position = 'fixed';
                toast.style.bottom = '20px';
                toast.style.right = '20px';
                toast.style.padding = '10px 15px';
                toast.style.backgroundColor = type === 'error' ? '#dc3545' :
                                              type === 'success' ? '#28a745' :
                                              '#333';
                toast.style.color = '#fff';
                toast.style.borderRadius = '5px';
                toast.style.zIndex = '9999';

                document.body.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 3000);
            },

            animateLike: function (button) {
                if (!button) return;

                button.classList.add('liked');

                setTimeout(() => {
                    button.classList.remove('liked');
                }, 300);
            },

            post: async function (url, data) {

                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'RequestVerificationToken':
                            document.querySelector('input[name="__RequestVerificationToken"]')?.value
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error('Request failed');
                }

                return await response.json();
            },

            init: function () {

                document.querySelectorAll('[data-like]').forEach(button => {
                    button.addEventListener('click', function () {
                        window.SohbaApp.animateLike(this);
                    });
                });

            }

        });

        document.addEventListener('DOMContentLoaded', function () {
            window.SohbaApp.init();
        });
    </script>

    
</body>
</html>
